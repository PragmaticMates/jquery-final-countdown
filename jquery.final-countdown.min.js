/*!
 * jQuery Final Countdown
 *
 * @author Pragmatic Mates, http://pragmaticmates.com
 * @author Alexander Heimbuch, http://zusatzstoff.org
 * 
 * @version 1.1.1
 * @license GPL 2
 * @link https://github.com/PragmaticMates/jquery-final-countdown
 */
!function($){"use strict";function t(t,e,s){this.timer=void 0,this.interval=void 0,this.circleSeconds=void 0,this.circleMinutes=void 0,this.circleHours=void 0,this.circleDays=void 0,this.layerSeconds=void 0,this.layerMinutes=void 0,this.layerHours=void 0,this.layerDays=void 0,this.callbackFunction=void 0,this.element=$(t);var i=$.extend({start:void 0,end:void 0,now:void 0,selectors:{value_seconds:".clock-seconds .val",canvas_seconds:".canvas-seconds",value_minutes:".clock-minutes .val",canvas_minutes:".canvas-minutes",value_hours:".clock-hours .val",canvas_hours:".canvas-hours",value_days:".clock-hours .val",canvas_days:".canvas-hours"},seconds:{borderColor:"#7995D5",borderWidth:"6"},minutes:{borderColor:"#ACC742",borderWidth:"6"},hours:{borderColor:"#ECEFCB",borderWidth:"6"},days:{borderColor:"#ECEFCB",borderWidth:"6"}},e);this.settings=$.extend({},i,e),void 0===this.settings.start&&(this.settings.start=this.element.data("start")),void 0===this.settings.end&&(this.settings.end=this.element.data("end")),void 0===this.settings.now&&(this.settings.now=this.element.data("now")),this.element.data("border-color")&&(this.settings.seconds.borderColor=this.settings.minutes.borderColor=this.settings.hours.borderColor=this.settings.days.borderColor=this.element.data("border-color")),this.settings.now<this.settings.start&&(this.settings.start=this.settings.now,this.settings.end=this.settings.now),this.settings.now>this.settings.end&&(this.settings.start=this.settings.now,this.settings.end=this.settings.now),"function"==typeof s&&(this.callbackFunction=s),this.scale(),void 0!==this.settings.start&&void 0!==this.settings.end&&void 0!==this.settings.now&&(this.set(this.settings.start,this.settings.end,this.settings.now),this.prepare(),this.start())}function e(t){return Math.PI/180*t-Math.PI/180*90}t.prototype={set:function(t,e,s){this.timer={total:Math.floor((e-t)/86400),hours:24-Math.floor((e-s)%86400/3600),minutes:60-Math.floor((e-s)%86400%3600/60),seconds:60-Math.floor((e-s)%86400%3600%60)},this.prepare()},update:function(){void 0!==this.layerSeconds&&this.layerSeconds.draw(),void 0!==this.layerMinutes&&this.layerMinutes.draw(),void 0!==this.layerMinutes&&this.layerHours.draw()},scale:function(){$(window).load(this.update),$(window).on("redraw",function(){this.update()}),$(window).on("resize",this.update)},prepare:function(){this.prepareSeconds(),this.prepareMinutes(),this.prepareHours(),this.prepareDays()},prepareSeconds:function(){if(0===this.element.find(this.settings.selectors.canvas_seconds).length)return void(this.layerSeconds={draw:function(){}});var t=this,s=this.element.find(this.settings.selectors.canvas_seconds).width(),i=new Kinetic.Stage({container:t.element.find(t.settings.selectors.canvas_seconds).get(0),width:s,height:s});this.circleSeconds=new Kinetic.Shape({drawFunc:function(i){var n=s/2-t.settings.seconds.borderWidth/2,r=s/2,o=s/2;i.beginPath(),i.arc(r,o,n,e(0),e(6*t.timer.seconds)),i.fillStrokeShape(this),t.element.find(t.settings.selectors.value_seconds).html(60-t.timer.seconds)},stroke:t.settings.seconds.borderColor,strokeWidth:t.settings.seconds.borderWidth}),this.layerSeconds=new Kinetic.Layer,this.layerSeconds.add(this.circleSeconds),i.add(this.layerSeconds)},prepareMinutes:function(){if(0===this.element.find(this.settings.selectors.canvas_minutes).length)return void(this.layerMinutes={draw:function(){}});var t=this,s=this.element.find(this.settings.selectors.canvas_minutes).width(),i=new Kinetic.Stage({container:t.element.find(t.settings.selectors.canvas_minutes).get(0),width:s,height:s});this.circleMinutes=new Kinetic.Shape({drawFunc:function(i){var n=s/2-t.settings.minutes.borderWidth/2,r=s/2,o=s/2;i.beginPath(),i.arc(r,o,n,e(0),e(6*t.timer.minutes)),i.fillStrokeShape(this),t.element.find(t.settings.selectors.value_minutes).html(60-t.timer.minutes)},stroke:t.settings.minutes.borderColor,strokeWidth:t.settings.minutes.borderWidth}),this.layerMinutes=new Kinetic.Layer,this.layerMinutes.add(this.circleMinutes),i.add(this.layerMinutes)},prepareHours:function(){if(0===this.element.find(this.settings.selectors.canvas_hours).length)return void(this.layerHours={draw:function(){}});var t=this,s=this.element.find(this.settings.selectors.canvas_hours).width(),i=new Kinetic.Stage({container:t.element.find(t.settings.selectors.canvas_hours).get(0),width:s,height:s});this.circleHours=new Kinetic.Shape({drawFunc:function(i){var n=s/2-t.settings.hours.borderWidth/2,r=s/2,o=s/2;i.beginPath(),i.arc(r,o,n,e(0),e(360*t.timer.hours/24)),i.fillStrokeShape(this),t.element.find(t.settings.selectors.value_hours).html(24-t.timer.hours)},stroke:t.settings.hours.borderColor,strokeWidth:t.settings.hours.borderWidth}),this.layerHours=new Kinetic.Layer,this.layerHours.add(this.circleHours),i.add(this.layerHours)},prepareDays:function(){if(0===this.element.find(this.settings.selectors.canvas_days).length)return void(this.layerDays={draw:function(){}});var t=this,s=this.element.find(this.settings.selectors.canvas_days).width(),i=new Kinetic.Stage({container:t.element.find(t.settings.selectors.canvas_days).get(0),width:s,height:s});this.circleDays=new Kinetic.Shape({drawFunc:function(i){var n=s/2-t.settings.days.borderWidth/2,r=s/2,o=s/2;i.beginPath(),i.arc(r,o,n,e(0),e(360*t.timer.days/24)),i.fillStrokeShape(this),t.element.find(t.settings.selectors.value_Days).html(24-t.timer.days)},stroke:t.settings.days.borderColor,strokeWidth:t.settings.days.borderWidth}),this.layerDays=new Kinetic.Layer,this.layerDays.add(this.circleDays),i.add(this.layerDays)},start:function(){var t=this;return void 0!==this.interval?!1:void(this.interval=setInterval(function(){if(t.timer.seconds>59){if(60-t.timer.minutes===0&&24-t.timer.hours===0&&0===t.timer.days)return clearInterval(t.interval),void(void 0!==t.callbackFunction&&t.callbackFunction.call(this));t.timer.seconds=1,t.timer.minutes>59?(t.timer.minutes=1,t.layerMinutes.draw(),t.timer.hours>23?(t.timer.hours=1,t.timer.days>0&&(t.timer.days--,t.layerDays.draw())):t.timer.hours++,t.layerHours.draw()):t.timer.minutes++,t.layerMinutes.draw()}else t.timer.seconds++;t.layerSeconds.draw()},1e3))},stop:function(){clearInterval(this.interval),this.interval=void 0}},$.fn.final_countdown=function(e,s){return new t(this,e,s)}}(jQuery);